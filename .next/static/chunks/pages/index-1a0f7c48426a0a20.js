(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{75557:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(37583)}])},37583:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return b}});var n=t(85893),s=t(9008),o=t.n(s),i=t(59647),c=t.n(i),r=t(67294),l=t(97277),d=t(5121),h=t(37428),u=t.n(h);t(41664);var p=t(51164),m=t.n(p),v=t(89650),g=()=>(0,n.jsxs)("div",{className:m().container,children:[(0,n.jsx)("div",{className:m().intro,children:"Keep track of your investments with real-time information!"}),(0,n.jsx)("div",{className:m().connectMessage,children:"Please connect to your account to access portfolio."}),(0,n.jsx)(v.NL,{showBalance:!1,accountStatus:"avatar"})]}),_=t(35133),x=e=>{let{size:a=50,stroke:t=4,speed:s=2,color:o="black"}=e;return(0,n.jsx)("svg",{width:a,height:a,viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",stroke:o,children:(0,n.jsx)("circle",{cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:t,strokeLinecap:"round"})})},f=t(31010),j=e=>{let{data:a,tokenPriceChange:t,bscdata:s,bsctokenPriceChange:o}=e,{address:i}=(0,_.mA)(),[c,l]=(0,r.useState)("");(0,r.useEffect)(()=>{l(i)},[]);let[h,p]=(0,r.useState)("etherScan"),[m,v]=(0,r.useState)(""),{isConnected:g}=(0,_.mA)(),[j,C]=(0,r.useState)(!1),[w,b]=(0,r.useState)(!1),[k,N]=(0,r.useState)(null);if((0,r.useEffect)(()=>{g?C(!0):C(!1)},[g]),!j)return(0,n.jsx)("div",{children:(0,n.jsx)(x,{size:50,stroke:4,speed:2,color:"black"})});if(!a||!t)return(0,n.jsx)("div",{children:"Loading..."});let S=(e,a)=>{let t=(e=Number(e))/Math.pow(10,a);return t>=1e3?(t/1e3).toFixed(1)+"k":t.toFixed(2)},P=s.map(e=>{let a=o.find(a=>a.address===e.address);return{...e,priceChange:a||null}}),y=a.map(e=>{let a=t.find(a=>a.address===e.address);return{...e,priceChange:a||null}});[...y,...P];let E=(e,a)=>((e=Number(e))/Math.pow(10,a)).toFixed(2),T=("etherScan"===h?y:P).filter(e=>null!==e.priceChange&&null!==e.priceUsd).filter(e=>e.name.toLowerCase().includes(m.toLowerCase())||e.symbol.toLowerCase().includes(m.toLowerCase())).map(e=>({...e,holdingValue:E(e.balance,e.decimals)*(Number(e.priceUsd)||0)})).sort((e,a)=>a.holdingValue-e.holdingValue);T.reduce((e,a)=>e+Number(E(a.balance,a.decimal)),0);let B=T.reduce((e,a)=>e+E(a.balance,a.decimals)*Number(a.priceUsd),0),A=e=>{p(e)},F=async(e,a)=>{try{let t=await d.Z.get("http://localhost:5003/addFavToken",{params:{userAddress:c,tokenName:e,tokenAddress:a}});console.log(t),t.data.success&&alert("Token added to favorites successfully!")}catch(e){console.error("Error adding wallet address:",e)}};return(0,n.jsxs)("section",{className:u().main,children:[(0,n.jsx)("header",{className:u().header,children:(0,n.jsx)("h1",{children:"Portfolio Overview"})}),(0,n.jsxs)("div",{className:u().tabContainer,children:[(0,n.jsx)("div",{className:"".concat(u().tab," ").concat("etherScan"===h?u().activeTab:""),onClick:()=>A("etherScan"),children:"ETHERScan"}),(0,n.jsx)("div",{className:"".concat(u().tab," ").concat("bscScan"===h?u().activeTab:""),onClick:()=>A("bscScan"),children:"BSCscan"}),(0,n.jsx)("div",{className:u().searchBox,children:(0,n.jsx)("input",{type:"text",placeholder:"Search tokens...",value:m,onChange:e=>{v(e.target.value)},className:u().searchInput})}),(0,n.jsxs)("div",{className:u().totalPortfolioValue,children:["Portfolio Value $",B.toFixed(2)]})]}),(0,n.jsx)("section",{className:u().result,children:(0,n.jsxs)("table",{className:u().tokenTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:u().name,children:"Token Name"}),(0,n.jsx)("th",{className:u().amount,children:"Price USD"}),(0,n.jsx)("th",{className:u().amount,children:"Holding(value)"}),(0,n.jsx)("th",{className:u().amount,children:"Holder Count"}),(0,n.jsx)("th",{className:u().amount,children:"5m"}),(0,n.jsx)("th",{className:u().amount,children:"1h"}),(0,n.jsx)("th",{className:u().amount,children:"6h"}),(0,n.jsx)("th",{className:u().amount,children:"24h"}),(0,n.jsx)("th",{className:u().amount,children:"7d"}),(0,n.jsx)("th",{className:u().amount,children:"Action"})]})}),(0,n.jsxs)("tbody",{children:[T.map((e,a)=>{var t,s,o,i,c,r,l,d,h,p,m,v,g,_,x,f,j,C,w,k;return(0,n.jsxs)("tr",{className:u().tokenContainer,children:[(0,n.jsxs)("td",{children:[(0,n.jsx)("p",{className:u().name,onClick:()=>{N(e.address),b(!0)},children:e.name||e.symbol||"Unknown"}),(0,n.jsx)("span",{className:u().balance,children:S(e.balance,e.decimals)})]}),(0,n.jsxs)("td",{className:u().amount,children:["$",Number(e.priceUsd||"N/A").toFixed(4)]}),(0,n.jsxs)("td",{children:["$",e.holdingValue.toFixed(2)]}),(0,n.jsx)("td",{className:u().amount,children:e.holdersCount||"N/A"}),(0,n.jsx)("td",{className:"".concat(u().amount," ").concat((null===(s=e.priceChange)||void 0===s?void 0:null===(t=s.priceChange)||void 0===t?void 0:t.m5)<0?u().negativeChange:(null===(i=e.priceChange)||void 0===i?void 0:null===(o=i.priceChange)||void 0===o?void 0:o.m5)>0?u().positiveChange:""),children:(null===(r=e.priceChange)||void 0===r?void 0:null===(c=r.priceChange)||void 0===c?void 0:c.m5)||"  "}),(0,n.jsx)("td",{className:"".concat(u().amount," ").concat((null===(d=e.priceChange)||void 0===d?void 0:null===(l=d.priceChange)||void 0===l?void 0:l.h1)<0?u().negativeChange:(null===(p=e.priceChange)||void 0===p?void 0:null===(h=p.priceChange)||void 0===h?void 0:h.h1)>0?u().positiveChange:""),children:(null===(v=e.priceChange)||void 0===v?void 0:null===(m=v.priceChange)||void 0===m?void 0:m.h1)||"  "}),(0,n.jsx)("td",{className:"".concat(u().amount," ").concat((null===(_=e.priceChange)||void 0===_?void 0:null===(g=_.priceChange)||void 0===g?void 0:g.h6)<0?u().negativeChange:(null===(f=e.priceChange)||void 0===f?void 0:null===(x=f.priceChange)||void 0===x?void 0:x.h6)>0?u().positiveChange:""),children:(null===(C=e.priceChange)||void 0===C?void 0:null===(j=C.priceChange)||void 0===j?void 0:j.h6)||"  "}),(0,n.jsx)("td",{className:"".concat(u().amount," ").concat(e.price.diff<0?u().negativeChange:e.price.diff>0?u().positiveChange:""),children:e.price.diff||"  "}),(0,n.jsx)("td",{className:"".concat(u().amount," ").concat(e.price.diff7d<0?u().negativeChange:e.price.diff7d>0?u().positiveChange:""),children:e.price.diff7d||"  "}),(0,n.jsx)("td",{className:u().amount,children:(null===(k=e.priceChange)||void 0===k?void 0:null===(w=k.pair)||void 0===w?void 0:w.pairAddress)||"  "}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{className:u().favoriteButton,onClick:()=>F(e.name,e.address),children:"Fav"})})]},a)}),w&&k&&(0,n.jsx)("div",{className:u().popup,children:(0,n.jsx)("div",{className:u().popupContent,children:(0,n.jsx)(f.Z,{baseTokenAddress:k,activeTab:h,onClose:()=>b(!1)})})})]})]})})]})},C=e=>{let{balances:a,bscData:t}=e,[s,o]=(0,r.useState)(null),[i,c]=(0,r.useState)(!1),[l,h]=(0,r.useState)([]),[u,p]=(0,r.useState)(null),[m,v]=(0,r.useState)(!1),[g,_]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{let e=x(a.map(e=>e.address),29).map(async e=>{var a,t,n;let s=await d.Z.get("".concat("https://api.geckoterminal.com/api/v2/simple/networks/eth/token_price","/").concat(e.join(",")));return(null===(n=s.data)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:null===(a=t.attributes)||void 0===a?void 0:a.token_prices)||{}}),t=await Promise.all(e),n=Object.assign({},...t),s=a.map(e=>({...e,priceUsd:n[e.address]||null}));o(s);let i=Object.keys(n),c=(await d.Z.get("http://localhost:5003/gettokenPriceChange",{params:{keys:i}})).data,r=f(c.responseData,c.response_data);h(r)}catch(e){console.error("Error fetching token prices for Ethereum network:",e)}})(),(async()=>{try{let e=x(t.map(e=>e.address),30).map(async e=>{var a,t,n;let s=await d.Z.get("".concat("https://api.geckoterminal.com/api/v2/simple/networks/bsc/token_price","/").concat(e.join(",")));return(null===(n=s.data)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:null===(a=t.attributes)||void 0===a?void 0:a.token_prices)||{}}),a=await Promise.all(e),n=Object.assign({},...a),s=t.map(e=>({...e,priceUsd:n[e.address]||null}));p(s);let o=Object.keys(n),i=(await d.Z.get("http://localhost:5003/getBscTokenPriceChange",{params:{keys:o}})).data,c=f(i.responseData,i.response_data);_(c)}catch(e){console.error("Error fetching token prices for Binance Smart Chain network:",e)}})()},[a,t]),(0,r.useEffect)(()=>{console.log("Token Price Change (Ethereum):",l)},[l]),(0,r.useEffect)(()=>{console.log("Token Price Change (Binance Smart Chain):",g)},[g]);let x=(e,a)=>Array.from({length:Math.ceil(e.length/a)},(t,n)=>e.slice(n*a,n*a+a)),f=(e,a)=>{let t=[];return e&&e.forEach(e=>{let{address:a,pairAddress:n,data:s}=e;if(s&&s.pair){let{priceChange:e}=s.pair;t.push({address:a,pairAddress:s.pair.baseToken.address,priceChange:e,pairAddress:n})}}),a&&a.forEach(e=>{let{pairAddress:a,address:n,base_token_price_usd:s,price_change_percentage:o}=e,i={h1:o.h1,h6:o.h6,h24:o.h24,m5:o.m5};t.push({address:n,priceChange:i,pairAddress:a})}),t};return(0,r.useEffect)(()=>{s&&l&&u&&g&&c(!0)},[s,l,u,g]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("section",{children:i&&s&&l&&u&&g&&(0,n.jsx)(j,{data:s,tokenPriceChange:l,bscdata:u,bsctokenPriceChange:g})})})};function w(){let e="0x4e6FB88e48711d9f692942304D48A3aFc843e99A",[a,t]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)([]),[l,h]=(0,r.useState)([]),{isConnected:u}=(0,_.mA)();return(0,r.useEffect)(()=>{u?o(!0):o(!1)},[u]),(0,r.useEffect)(()=>{(async()=>{try{let a=await d.Z.get("http://localhost:5003/getwalletbalance",{params:{address:e}});c(a.data);let n=await d.Z.get("http://localhost:5003/getBscWalletBalance",{params:{address:e}});h(n.data),t(!0)}catch(e){console.error("Error fetching data:",e)}})()},[e]),(0,n.jsx)(n.Fragment,{children:s?(0,n.jsx)("section",{children:a&&l.length>0&&(0,n.jsx)(C,{balances:i,bscData:l})}):(0,n.jsx)(g,{})})}function b(){let{isConnected:e}=(0,_.mA)(),[a,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{e?t(!0):t(!1)},[e]),(0,n.jsxs)("section",{className:c().container,children:[(0,n.jsxs)(o(),{children:[(0,n.jsx)("title",{children:"Web 3"}),(0,n.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("main",{className:c().main,children:[a&&(0,n.jsx)(l.Z,{}),(0,n.jsx)(w,{})]})]})}t(59054)},51164:function(e){e.exports={container:"LoginPage_container__5H6C5",intro:"LoginPage_intro__ANm4h",quote:"LoginPage_quote__fVqF0",connectMessage:"LoginPage_connectMessage__YFBBo",loginButton:"LoginPage_loginButton__J7Qoq"}},37428:function(e){e.exports={tabContainer:"ShowPrice_tabContainer__bgbUQ",main:"ShowPrice_main__C7hvv",tab:"ShowPrice_tab__fJz0Y",activeTab:"ShowPrice_activeTab__V39Mx",negativeChange:"ShowPrice_negativeChange__m00Wg",positiveChange:"ShowPrice_positiveChange__2K6Xn",tokenTable:"ShowPrice_tokenTable__0jdoP",tokenContainer:"ShowPrice_tokenContainer__LulIz",name:"ShowPrice_name__N33OF",amount:"ShowPrice_amount__GdRGm",balance:"ShowPrice_balance__F3Ljp",header:"ShowPrice_header__2oAWm",backgroundChart:"ShowPrice_backgroundChart__PnEyz",totalPortfolioValue:"ShowPrice_totalPortfolioValue__IvrpT",searchBox:"ShowPrice_searchBox__nr70q",searchInput:"ShowPrice_searchInput__CGkdT",searchButton:"ShowPrice_searchButton__wF9nh",loadingAnimation:"ShowPrice_loadingAnimation__iwAzs",rotate:"ShowPrice_rotate__9saU6",favoriteButton:"ShowPrice_favoriteButton__orwlb","popup-overlay":"ShowPrice_popup-overlay__kT_Pu","popup-content":"ShowPrice_popup-content__k7y4n","popup-close":"ShowPrice_popup-close__FWjgd"}}},function(e){e.O(0,[196,764,871,846,888,774,179],function(){return e(e.s=75557)}),_N_E=e.O()}]);